{"version":3,"sources":["webpack:///./public/src/pages/toplist/rank/index.js"],"names":["mapStateToProps","toplist","rank","loading","page","list","banner","rankname","time","total","mapDispatchToProps","dispatch","getList","payload","type","loadRank","initRank","showLoading","Rank","connect","immutableRenderDecorator","BaseHandler","props","id","match","params","length","rankid","onSongClick","onDownload","addPlayingList","actions","name","key","onClick","row","close","author","desc","toast","show","paddingBottom","loadList","Component"],"mappings":"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","file":"6.js","sourcesContent":["import React,{Component} from 'react'\r\nimport {NavLink} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\nimport { immutableRenderDecorator } from 'react-immutable-render-mixin'\r\nimport SongsView from '../../../components/songs-view'\r\nimport Scroll from '../../../components/scroll'\r\nimport BaseHandler,{toast} from '../../../common/basehandler'\r\n\r\nconst mapStateToProps = ({toplist:{rank:{loading,page,list,banner,rankname,time,total}}}) => ({loading,page,list,banner,rankname,time,total})\r\nconst mapDispatchToProps = dispatch => ({\r\n\tgetList:payload => {\r\n\t\tdispatch({\r\n\t\t\ttype:'GET_RANK_LIST_REQUEST',\r\n\t\t\tpayload\r\n\t\t})\r\n\t},\r\n\tloadRank:payload => {\r\n\t\tdispatch({\r\n\t\t\ttype:'LOAD_RANK_LIST_REQUEST',\r\n\t\t\tpayload\r\n\t\t})\r\n\t},\r\n\tinitRank:() => {\r\n\t\tdispatch({\r\n\t\t\ttype:'INIT_RANK_LIST'\r\n\t\t})\r\n\t},\r\n\tshowLoading: payload => {\r\n\t\tdispatch({\r\n\t\t\ttype:'CHANGE_RANK_LOADING_STATE',\r\n\t\t\tpayload\r\n\t\t})\r\n\t}\r\n})\r\n\r\n@immutableRenderDecorator\r\n@connect(mapStateToProps,mapDispatchToProps)\r\n@BaseHandler\r\nclass Rank extends Component{\r\n\tcomponentDidMount = () => {\r\n\t\tconst {page,list,getList,match:{params:{id}}} = this.props\r\n\t\tif(id && !list.length){\r\n\t\t\tgetList({\r\n\t\t\t\trankid:id,\r\n\t\t\t\tpage\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tcomponentWillUnmount = () => {\r\n\t\tconst {initRank} = this.props\r\n\t\tinitRank()\r\n\t}\r\n\tloadList = () => {\r\n\t\tconst {page,total,list,loadRank,showLoading,match:{params:{id}}} = this.props\r\n\t\tif(total > list.length){\r\n\t\t\tshowLoading(true)\r\n\t\t\tloadRank({\r\n\t\t\t\trankid:id,\r\n\t\t\t\tpage:page + 1\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\trender(){\r\n\t\tconst {list,rankname,time,banner,loading,onSongClick,onDownload,addPlayingList} = this.props\r\n\t\tconst actions = [{\r\n\t\t\tname:'播放',\r\n\t\t\tkey:'play',\r\n\t\t\tonClick:(row,close) => {\r\n\t\t\t\tonSongClick(row)\r\n\t\t\t\tclose()\r\n\t\t\t}\r\n\t\t},{\r\n\t\t\tname:'添加到歌单',\r\n\t\t\tkey:'add',\r\n\t\t\tonClick:(row,close) => {\r\n\t\t\t\taddPlayingList({\r\n\t\t\t\t\tid:row.id,\r\n\t\t\t\t\tauthor:row.desc,\r\n\t\t\t\t\tname:row.name\r\n\t\t\t\t})\r\n\t\t\t\ttoast.show('添加成功')\r\n\t\t\t\tclose()\r\n\t\t\t}\r\n\t\t},{\r\n\t\t\tname:'分享',\r\n\t\t\tkey:'share',\r\n\t\t\tonClick:(row,close) => {\r\n\t\t\t\ttoast.show('该功能暂时没开通')\r\n\t\t\t}\r\n\t\t},{\r\n\t\t\tname:'下载',\r\n\t\t\tkey:'download',\r\n\t\t\tonClick:(row,close) => {\r\n\t\t\t\tonDownload(row.id)\r\n\t\t\t\tclose()\r\n\t\t\t}\r\n\t\t}]\r\n\t\treturn(\r\n\t\t\t<div className=\"rank\">\r\n\t\t\t\t<Scroll style={{paddingBottom:70}} loading={loading} onBottom={this.loadList}>\r\n\t\t\t\t\t<SongsView\r\n\t\t\t\t\t\tactions={actions}\r\n\t\t\t\t\t\tonSongClick={onSongClick}\r\n\t\t\t\t\t\tbanner={banner}\r\n\t\t\t\t\t\tlist={list}\r\n\t\t\t\t\t\ttitle={rankname}\r\n\t\t\t\t\t\tfootText={time}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Scroll>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Rank"],"sourceRoot":""}
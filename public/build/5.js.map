{"version":3,"sources":["webpack:///./public/src/pages/singer-classlist/songs/index.js"],"names":["mapStateToProps","singerClasslist","singer","list","singerName","banner","intro","page","loading","total","mapDispatchToProps","dispatch","getSongsList","payload","type","loadSongsList","initSinger","showLoading","Songs","connect","immutableRenderDecorator","BaseHandler","props","id","match","params","length","singerid","onSongClick","addPlayingList","onDownload","actions","name","key","onClick","row","close","author","desc","toast","show","paddingBottom","loadList","header","content","Component"],"mappings":"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","file":"5.js","sourcesContent":["import React,{Component} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport { immutableRenderDecorator } from 'react-immutable-render-mixin'\r\nimport Icon from '../../../components/icon'\r\nimport SongsView from '../../../components/songs-view'\r\nimport Scroll from '../../../components/scroll'\r\nimport BaseHandler,{toast} from '../../../common/basehandler'\r\n\r\nconst mapStateToProps = ({singerClasslist:{singer:{list,singerName,banner,intro,page,loading,total}}}) => ({list,singerName,banner,intro,page,loading,total})\r\nconst mapDispatchToProps = dispatch => ({\r\n\tgetSongsList:payload => {\r\n\t\tdispatch({\r\n\t\t\ttype:'GET_SINGER_SONGS_LIST_REQUEST',\r\n\t\t\tpayload\r\n\t\t})\r\n\t},\r\n\tloadSongsList:payload => {\r\n\t\tdispatch({\r\n\t\t\ttype:'LOAD_SONGS_LIST_REQUEST',\r\n\t\t\tpayload\r\n\t\t})\r\n\t},\r\n\tinitSinger:() => {\r\n\t\tdispatch({\r\n\t\t\ttype:'INIT_SONGS_LIST'\r\n\t\t})\r\n\t},\r\n\tshowLoading:payload => {\r\n\t\tdispatch({\r\n\t\t\ttype:'CHANGE_SINGER_LOADING',\r\n\t\t\tpayload\r\n\t\t})\r\n\t}\r\n})\r\n\r\n@immutableRenderDecorator\r\n@connect(mapStateToProps,mapDispatchToProps)\r\n@BaseHandler\r\nclass Songs extends Component{\r\n\tcomponentDidMount = () => {\r\n\t\tconst {match:{params:{id}},getSongsList,page,list} = this.props\r\n\t\tif(id && !list.length){\r\n\t\t\tgetSongsList({\r\n\t\t\t\tsingerid:id,\r\n\t\t\t\tpage\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tcomponentWillUnmount = () => {\r\n\t\tconst {initSinger,list} = this.props\r\n\t\tif(list.length){\r\n\t\t\tinitSinger()\r\n\t\t}\r\n\t}\r\n\tloadList = () => {\r\n\t\tconst {match:{params:{id}},loadSongsList,page,total,list,showLoading} = this.props\r\n\t\tif(total > list.length){\r\n\t\t\tshowLoading(true)\r\n\t\t\tloadSongsList({\r\n\t\t\t\tsingerid:id,\r\n\t\t\t\tpage:page + 1\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\trender(){\r\n\t\tconst {list,singerName,banner,intro,loading,onSongClick,addPlayingList,onDownload} = this.props\r\n\t\tconst actions = [{\r\n\t\t\tname:'播放',\r\n\t\t\tkey:'play',\r\n\t\t\tonClick:(row,close) => {\r\n\t\t\t\tonSongClick(row)\r\n\t\t\t\tclose()\r\n\t\t\t}\r\n\t\t},{\r\n\t\t\tname:'添加到歌单',\r\n\t\t\tkey:'add',\r\n\t\t\tonClick:(row,close) => {\r\n\t\t\t\taddPlayingList({\r\n\t\t\t\t\tid:row.id,\r\n\t\t\t\t\tauthor:row.desc,\r\n\t\t\t\t\tname:row.name\r\n\t\t\t\t})\r\n\t\t\t\ttoast.show('添加成功')\r\n\t\t\t\tclose()\r\n\t\t\t}\r\n\t\t},{\r\n\t\t\tname:'分享',\r\n\t\t\tkey:'share',\r\n\t\t\tonClick:(row,close) => {\r\n\t\t\t\ttoast.show('该功能暂时没开通')\r\n\t\t\t}\r\n\t\t},{\r\n\t\t\tname:'下载',\r\n\t\t\tkey:'download',\r\n\t\t\tonClick:(row,close) => {\r\n\t\t\t\tonDownload(row.id)\r\n\t\t\t\tclose()\r\n\t\t\t}\r\n\t\t}]\r\n\t\treturn (\r\n\t\t\t<div className=\"songs\">\r\n\t\t\t\t<Scroll style={{paddingBottom:70}} loading={loading} onBottom={this.loadList}>\r\n\t\t\t\t\t<SongsView\r\n\t\t\t\t\t\tactions={actions}\r\n\t\t\t\t\t\tonSongClick={onSongClick}\r\n\t\t\t\t\t\tlist={list}\r\n\t\t\t\t\t\ttitle={singerName}\r\n\t\t\t\t\t\tbanner={banner}\r\n\t\t\t\t\t\tcollapse={{\r\n\t\t\t\t\t\t\theader:singerName,\r\n\t\t\t\t\t\t\tcontent:intro\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Scroll>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Songs"],"sourceRoot":""}
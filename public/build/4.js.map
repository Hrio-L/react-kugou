{"version":3,"sources":["webpack:///./public/src/pages/plist/detail/index.js"],"names":["mapStateToProps","plist","detail","list","banner","specialname","intro","loading","total","page","mapDispatchToProps","dispatch","getDetail","payload","type","loadDetail","initDetail","showLoading","PlistDetail","connect","immutableRenderDecorator","BaseHander","props","id","match","params","plistid","length","onSongClick","addPlayingList","onDownload","actions","name","key","onClick","row","close","author","desc","toast","show","paddingBottom","loadList","header","content","PureComponent"],"mappings":"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","file":"4.js","sourcesContent":["import React,{PureComponent} from 'react'\r\nimport {NavLink} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\nimport { immutableRenderDecorator } from 'react-immutable-render-mixin'\r\nimport SongsView from '../../../components/songs-view'\r\nimport Scroll from '../../../components/scroll'\r\nimport BaseHander,{toast} from '../../../common/basehandler'\r\n\r\nconst mapStateToProps = ({plist:{detail:{list,banner,specialname,intro,loading,total,page}}}) => ({list,banner,specialname,intro,loading,total,page})\r\nconst mapDispatchToProps = dispatch => ({\r\n\tgetDetail:payload => {\r\n\t\tdispatch({\r\n\t\t\ttype:'GET_PLIST_DETAIL_REQUEST',\r\n\t\t\tpayload\r\n\t\t})\r\n\t},\r\n\tloadDetail:payload => {\r\n\t\tdispatch({\r\n\t\t\ttype:'LOAD_PLIST_DETAIL_REQUEST',\r\n\t\t\tpayload\r\n\t\t})\r\n\t},\r\n\tinitDetail:() => {\r\n\t\tdispatch({\r\n\t\t\ttype:'INIT_PLIST_DETAIL'\r\n\t\t})\r\n\t},\r\n\tshowLoading:payload => {\r\n\t\tdispatch({\r\n\t\t\ttype:'CHANGE_PLIST_DETAIL_LOADING_STATE',\r\n\t\t\tpayload\r\n\t\t})\r\n\t}\r\n})\r\n\r\n@immutableRenderDecorator\r\n@connect(mapStateToProps,mapDispatchToProps)\r\n@BaseHander\r\nclass PlistDetail extends PureComponent{\r\n\tcomponentDidMount = () => {\r\n\t\tconst {page,getDetail,list,match:{params:{id}}} = this.props\r\n\t\tif(id){\r\n\t\t\tgetDetail({\r\n\t\t\t\tplistid:id,\r\n\t\t\t\tpage\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tcomponentWillUnmount = () => {\r\n\t\tconst {initDetail,list} = this.props\r\n\t\tif(list.length){\r\n\t\t\tthis.props.initDetail()\r\n\t\t}\r\n\t}\r\n\tloadList = () => {\r\n\t\tconst {page,total,list,showLoading,loadDetail,match:{params:{id}}} = this.props\r\n\t\tif(total > list.length){\r\n\t\t\tshowLoading(true)\r\n\t\t\tloadDetail({\r\n\t\t\t\tplistid:id,\r\n\t\t\t\tpage:page+1\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\trender(){\r\n\t\tconst {list,specialname,banner,intro,loading,onSongClick,addPlayingList,onDownload} = this.props\r\n\t\tconst actions = [{\r\n\t\t\tname:'播放',\r\n\t\t\tkey:'play',\r\n\t\t\tonClick:(row,close) => {\r\n\t\t\t\tonSongClick(row)\r\n\t\t\t\tclose()\r\n\t\t\t}\r\n\t\t},{\r\n\t\t\tname:'添加到歌单',\r\n\t\t\tkey:'add',\r\n\t\t\tonClick:(row,close) => {\r\n\t\t\t\taddPlayingList({\r\n\t\t\t\t\tid:row.id,\r\n\t\t\t\t\tauthor:row.desc,\r\n\t\t\t\t\tname:row.name\r\n\t\t\t\t})\r\n\t\t\t\ttoast.show('添加成功')\r\n\t\t\t\tclose()\r\n\t\t\t}\r\n\t\t},{\r\n\t\t\tname:'分享',\r\n\t\t\tkey:'share',\r\n\t\t\tonClick:(row,close) => {\r\n\t\t\t\ttoast.show('该功能暂时没开通')\r\n\t\t\t}\r\n\t\t},{\r\n\t\t\tname:'下载',\r\n\t\t\tkey:'download',\r\n\t\t\tonClick:(row,close) => {\r\n\t\t\t\tonDownload(row.id)\r\n\t\t\t\tclose()\r\n\t\t\t}\r\n\t\t}]\r\n\t\treturn(\r\n\t\t\t<div className=\"plist-detail\">\r\n\t\t\t\t<Scroll style={{paddingBottom:70}} loading={loading} onBottom={this.loadList}>\r\n\t\t\t\t\t<SongsView\r\n\t\t\t\t\t\tactions={actions}\r\n\t\t\t\t\t\tonSongClick={onSongClick}\r\n\t\t\t\t\t\tbanner={banner}\r\n\t\t\t\t\t\tlist={list}\r\n\t\t\t\t\t\ttitle={specialname}\r\n\t\t\t\t\t\tcollapse={{\r\n\t\t\t\t\t\t\theader:specialname,\r\n\t\t\t\t\t\t\tcontent:intro\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Scroll>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default PlistDetail"],"sourceRoot":""}